// src/components/analysis/classification-badge.tsx
// Badge showing company classification

'use client';

import { Badge } from '@/components/ui/badge';

type CompanyClassification = 'operational' | 'holding' | 'financing' | 'ip_holding' | 'mixed';

interface ClassificationBadgeProps {
  classification: CompanyClassification;
  reasoning?: string;
  size?: 'sm' | 'md' | 'lg';
}

export function ClassificationBadge({
  classification,
  reasoning,
  size = 'md',
}: ClassificationBadgeProps) {
  const getConfig = () => {
    switch (classification) {
      case 'operational':
        return {
          label: 'Operational',
          color: 'bg-blue-100 text-blue-700',
          icon: (
            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fillRule="evenodd"
                d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-2a1 1 0 00-1-1H9a1 1 0 00-1 1v2a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z"
                clipRule="evenodd"
              />
            </svg>
          ),
        };
      case 'holding':
        return {
          label: 'Holding',
          color: 'bg-purple-100 text-purple-700',
          icon: (
            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
            </svg>
          ),
        };
      case 'financing':
        return {
          label: 'Financing',
          color: 'bg-green-100 text-green-700',
          icon: (
            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" />
            </svg>
          ),
        };
      case 'ip_holding':
        return {
          label: 'IP Holding',
          color: 'bg-orange-100 text-orange-700',
          icon: (
            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path
                fillRule="evenodd"
                d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                clipRule="evenodd"
              />
            </svg>
          ),
        };
      case 'mixed':
        return {
          label: 'Mixed',
          color: 'bg-gray-100 text-gray-700',
          icon: (
            <svg className="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
              <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
            </svg>
          ),
        };
      default:
        return {
          label: 'Unknown',
          color: 'bg-gray-100 text-gray-500',
          icon: null,
        };
    }
  };

  const getSizeClasses = () => {
    switch (size) {
      case 'sm':
        return 'text-xs px-2 py-0.5';
      case 'lg':
        return 'text-base px-4 py-2';
      default:
        return 'text-sm px-3 py-1';
    }
  };

  const config = getConfig();
  const sizeClasses = getSizeClasses();

  return (
    <div className="group relative inline-flex">
      <Badge className={`${config.color} ${sizeClasses} flex items-center gap-1.5`}>
        {config.icon}
        {config.label}
      </Badge>
      {reasoning && (
        <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10 w-64 text-center">
          {reasoning}
          <div className="absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900" />
        </div>
      )}
    </div>
  );
}
